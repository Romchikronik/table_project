{% extends 'mainapp/departments/projects_department.html' %}
{% block table %}
<h2 class="mb-3">
    {% if request.user.district != None %}
        {{ request.user.district }},
    {% endif %}
    {{ title }}
</h2>
{% block filter %}
<div class="container mb-3">
    <div class="row">
        <div class="col-1"><a class="btn btn btn-primary w-100" href="{% url 'table_filter_loiha12' filter_slug='week' %}">неделя</a></div>
        <div class="col-1"><a class="btn btn btn-primary w-100" href="{% url 'table_filter_loiha12' filter_slug='month' %}">месяц</a></div>
        <div class="col-1"><a class="btn btn btn-primary w-100" href="{% url 'table_loiha12' %}">все</a></div>
    </div>
</div>
{% endblock %}
<div class="container overflow-auto">
    <table class="table table-bordered table-striped">
        <caption>
            {% if request.user.district != None %}
                {{ request.user.district }},
            {% endif %}
            {{ title }}
        </caption>
    <tr>
            {% for group in request.user.groups.all %}
            {% if group.id == 3 %}
            <th rowspan="3" class="table-info">HUDUDLAR</th>
            {% endif %}
            {% endfor %}
        <th class="table-info" rowspan="3">Все проекты</th>
        <th class="table-info" rowspan="3">Оценка(млрд долл)</th>
        <th class="table-primary" rowspan="3">Рабочее место</th>
        <th class="table-primary" colspan="9">Из них</th>
        <th class="table-info table-info-time" rowspan="3">Time create</th>
    </tr>
        <tr>
            <th class="table-info" colspan="3">Выбранные проекты</th>
            <th class="table-info" colspan="3">В процессе</th>
            <th class="table-info" colspan="3">Будут завершены к концу года</th>
        </tr>
        <tr>
            <th class="table-info">Проекты</th>
            <th class="table-info">Оценка</th>
            <th class="table-info">Рабочее место</th>
            <th class="table-info">Проекты</th>
            <th class="table-info">Оценка (млрд долл)</th>
            <th class="table-info">Рабочее место</th>
            <th class="table-info">Проекты</th>
            <th class="table-info">Оценка(миллиард долл)</th>
            <th class="table-info">Рабочее место </th>
        </tr>
        <tr>
            {% block form %}
            {%endblock%}
        </tr>
            {% for data in page_obj %}
        <tr>
            {% for group in request.user.groups.all %}
                {% if group.id == 3 %}
                   <td>{{data.district}}</td>
                {% endif %}
            {% endfor %}
            <td>{{ data.all_projects }}</td>
            <td>{{ data.grade }}</td>
            <td>{{ data.workplace }}</td>
            <td>{{ data.projects_selected_projects_from_all_projects }}</td>
            <td>{{ data.grade_selected_projects_from_all_projects }}</td>
            <td>{{ data.workplace_selected_projects_from_all_projects }}</td>
            <td>{{ data.all_projects_at_work_from_all_projects }}</td>
            <td>{{ data.grade_at_work_from_all_projects }}</td>
            <td>{{ data.workplace_at_work_from_all_projects }}</td>
            <td>{{ data.all_projects_will_be_completed_end_the_year_from_all_projects }}</td>
            <td>{{ data.grade_will_be_completed_end_the_year_all_projects }}</td>
            <td>{{ data.workplace_will_be_completed_end_the_year_all_projects }}</td>
            <td class="table-time">{{ data.time_create }}</td>
        </tr>
            {%endfor%}

    </table>
</div>
{% include 'mainapp/pagination.html' %}
{% endblock %}

{% block export_table %}
<a class="btn btn-primary mb-5" href="#">Экспорт таблицы</a>
{%endblock%}

{% block add_data %}
    {% if not request.user.groups.all and not request.user.is_superuser %}
<a class="btn btn-success mb-5" href="{% url 'form_loiha12' %}">Добавить данные</a>
    {% endif %}
{%endblock%}